---
title: Utilities
description: vitest-cucumber CLI and serialization utilities
---

## Generating a spec file

To save time, you can generate a spec file automatically from a *feature* file via the CLI:

~~~bash
npx @amiceli/vitest-cucumber --feature <path-to-feature> --spec <path-to-spec> --lang <en:optional>
~~~

Example:

~~~bash
npx @amiceli/vitest-cucumber --feature features/example.feature --spec src/__tests__/example.spec.ts
~~~

To parse a *feature* file in a different language, use the `--lang` option:

~~~bash
npx @amiceli/vitest-cucumber --feature features/example.feature --spec src/__tests__/example.spec.ts --lang fr
~~~

By default the *feature* file is parsed with `en` language.

## Serialization

**vitest-cucumber** provides a `serializeFeature` function that converts parsed `Feature` class instances into plain JSON-serializable objects. You can use it to generate documentation or build tooling on top of your *feature* files. See the [Astro integration guide](/integrations/astro) for a full example.

## Install

~~~bash
npm install @amiceli/vitest-cucumber --save-dev
~~~

## Usage

~~~typescript
import { loadFeatureFromText, serializeFeature } from "@amiceli/vitest-cucumber";

const content = `
Feature: Login
  Users should be able to log in

  Scenario: Valid credentials
    Given a registered user
    When they enter valid credentials
    Then they are logged in
`;

const feature = loadFeatureFromText(content);
const data = serializeFeature(feature);
// { name: "Login", description: "Users should be able to log in", ... }
~~~

You can pass `{ language: "fr" }` as the second argument to `loadFeatureFromText` for non-English *feature* files.

## Types

All types are exported from `@amiceli/vitest-cucumber` and map to [Gherkin keywords](https://cucumber.io/docs/gherkin/reference/).

### [`FeatureType`](https://cucumber.io/docs/gherkin/reference#feature)

~~~typescript
type FeatureType = {
  name: string
  description: string
  tags: string[]
  background: BackgroundType | null
  scenarii: (ScenarioType | ScenarioOutlineType)[]
  rules: RuleType[]
}
~~~

The `description` field captures the [description](https://cucumber.io/docs/gherkin/reference#descriptions) placed underneath the `Feature` keyword, before the first `Scenario`, `Background`, or `Rule`.

### [`ScenarioType`](https://cucumber.io/docs/gherkin/reference#example)

~~~typescript
type ScenarioType = {
  description: string
  tags: string[]
  steps: StepType[]
}
~~~

### [`ScenarioOutlineType`](https://cucumber.io/docs/gherkin/reference#scenario-outline)

~~~typescript
type ScenarioOutlineType = ScenarioType & {
  examples: Record<string, any>[]
}
~~~

The `examples` field contains the [`Examples`](https://cucumber.io/docs/gherkin/reference#examples) table rows.

### [`StepType`](https://cucumber.io/docs/gherkin/reference#steps)

~~~typescript
type StepType = {
  type: string           // "Given" | "When" | "Then" | "And" | "But"
  details: string
  docStrings: string | null
  dataTables: Record<string, string>[]
}
~~~

Steps may include [`DocStrings`](https://cucumber.io/docs/gherkin/reference#doc-strings) and [`DataTables`](https://cucumber.io/docs/gherkin/reference#data-tables) as step arguments.

### [`BackgroundType`](https://cucumber.io/docs/gherkin/reference#background)

~~~typescript
type BackgroundType = {
  tags: string[]
  steps: StepType[]
}
~~~

### [`RuleType`](https://cucumber.io/docs/gherkin/reference#rule)

~~~typescript
type RuleType = {
  name: string
  description: string
  tags: string[]
  background: BackgroundType | null
  scenarii: (ScenarioType | ScenarioOutlineType)[]
}
~~~

`Rule` groups scenarii under a single business rule and can have its own `Background`.
